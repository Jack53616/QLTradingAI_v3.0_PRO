<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QL Trading AI</title>
  
  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="./style.css">
</head>
<body>

  <!-- Splash Screen -->
  <div id="splash" class="splash">
    <div class="logo-wrap">
      <img src="./logo.svg" alt="QL" class="logo">
      <div class="logo-text">QL Trading AI</div>
    </div>
  </div>

  <!-- Activation Gate -->
  <div id="gate" class="gate">
    <video class="bg-video" src="./bg.mp4" autoplay muted loop playsinline></video>
    <div class="gate-overlay"></div>
    
    <div class="gate-card glass">
      <h1 class="gate-title" data-i18n="gateTitle">QL Trading ‚Äî Access</h1>
      <p class="gate-subtitle" data-i18n="gateSub">Enter your subscription key to unlock your wallet</p>
      
      <form id="activationForm" class="activation-form">
        <input 
          type="text" 
          id="nameInput" 
          class="input-field" 
          placeholder="Name / ÿßŸÑÿßÿ≥ŸÖ"
          autocomplete="name"
        >
        
        <input 
          type="email" 
          id="emailInput" 
          class="input-field" 
          placeholder="Email"
          autocomplete="email"
        >
        
        <input 
          type="text" 
          id="keyInput" 
          class="input-field" 
          placeholder="Enter activation key..."
          autocomplete="off"
        >
        
        <div class="button-row">
          <button type="submit" id="activateBtn" class="btn btn-primary">
            <span class="btn-text" data-i18n="confirm">Confirm</span>
            <span class="btn-loader" style="display: none;">‚è≥</span>
          </button>
          
          <a 
            href="https://wa.me/message/P6BBPSDL2CC4D1" 
            target="_blank" 
            class="btn btn-secondary"
            data-i18n="buyKey"
          >
            Buy a key
          </a>
        </div>
      </form>
      
      <div id="gateToast" class="toast"></div>
    </div>
  </div>

  <!-- Main App -->
  <div id="app" class="app hidden">
    
    <!-- Header -->
    <header class="app-header glass">
      <div class="header-top">
        <h1 class="app-brand">QL Wallet</h1>
        <div class="header-actions">
          <button id="settingsBtn" class="icon-btn" title="Settings">‚öôÔ∏è</button>
          <button id="langBtn" class="icon-btn" title="Language">üåê</button>
        </div>
      </div>
      
      <!-- Navigation Tabs -->
      <nav class="nav-tabs glass">
        <button class="nav-tab active" data-tab="wallet" data-i18n="tabWallet">Home</button>
        <button class="nav-tab" data-tab="markets" data-i18n="tabMarkets">Markets</button>
        <button class="nav-tab" data-tab="trades" data-i18n="tabTrades">Trades</button>
        <button class="nav-tab" data-tab="withdraw" data-i18n="tabWithdraw">Withdraw</button>
        <button class="nav-tab" data-tab="requests" data-i18n="tabRequests">Requests</button>
        <button class="nav-tab" data-tab="support" data-i18n="tabSupport">Support</button>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="app-main">
      
      <!-- Wallet Tab -->
      <section id="walletTab" class="tab-content active">
        
        <!-- Balance Card -->
        <div class="balance-card glass neon">
          <div class="vip-badge">üëë VIP Gold</div>
          
          <div class="balance-row">
            <div id="balanceAmount" class="balance-amount">$0.00</div>
            <div id="balancePnl" class="balance-pnl">+0.00</div>
          </div>
          
          <div id="tradeBadge" class="trade-badge" data-i18n="noOpenTrade">No open trade</div>
          
          <!-- Mini Chart -->
          <div class="mini-chart">
            <svg viewBox="0 0 100 28">
              <path id="chartPath" d="M0,18 C15,12 22,16 30,15 C40,14 52,10 60,12 C70,14 82,11 100,12"/>
            </svg>
          </div>
          
          <!-- Quick Actions -->
          <div class="quick-actions">
            <button class="quick-btn" data-action="withdraw">
              <span>‚¨á</span>
              <small data-i18n="withdraw">Withdraw</small>
            </button>
            <button class="quick-btn" data-action="markets">
              <span>üìà</span>
              <small data-i18n="markets">Markets</small>
            </button>
            <button class="quick-btn" data-action="support">
              <span>üõü</span>
              <small data-i18n="support">Support</small>
            </button>
          </div>
        </div>
        
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card glass">
            <div class="stat-label" data-i18n="day">Day</div>
            <div id="pnlDay" class="stat-value">$0.00</div>
          </div>
          <div class="stat-card glass">
            <div class="stat-label" data-i18n="month">Month</div>
            <div id="pnlMonth" class="stat-value">$0.00</div>
          </div>
          <div class="stat-card glass">
            <div class="stat-label" data-i18n="subLeft">Subscription</div>
            <div id="subDays" class="stat-value">‚Äî</div>
          </div>
        </div>
        
        <!-- Activity Feed -->
        <div class="card glass">
          <h3 class="card-title" data-i18n="recent">Recent activity</h3>
          <div id="activityList" class="activity-list">
            <div class="empty-state">No activity yet</div>
          </div>
        </div>
        
        <!-- Live Feed -->
        <div class="card glass">
          <h3 class="card-title" data-i18n="live">Live feed</h3>
          <div id="liveFeed" class="live-feed"></div>
        </div>
        
      </section>
      
      <!-- Markets Tab -->
      <section id="marketsTab" class="tab-content">
        <div class="markets-grid">
          <div class="market-card glass" data-symbol="XAUUSD">
            <div class="market-header">
              <strong>Gold</strong>
              <span class="market-change">+0.0%</span>
            </div>
            <div class="market-price">$‚Äî</div>
            <canvas class="market-chart" width="340" height="60"></canvas>
            <div class="market-actions">
              <button class="btn-trade buy" data-symbol="XAUUSD" data-type="buy">Buy</button>
              <button class="btn-trade sell" data-symbol="XAUUSD" data-type="sell">Sell</button>
            </div>
          </div>
          
          <div class="market-card glass" data-symbol="XAGUSD">
            <div class="market-header">
              <strong>Silver</strong>
              <span class="market-change">+0.0%</span>
            </div>
            <div class="market-price">$‚Äî</div>
            <canvas class="market-chart" width="340" height="60"></canvas>
            <div class="market-actions">
              <button class="btn-trade buy" data-symbol="XAGUSD" data-type="buy">Buy</button>
              <button class="btn-trade sell" data-symbol="XAGUSD" data-type="sell">Sell</button>
            </div>
          </div>
          
          <div class="market-card glass" data-symbol="BTCUSDT">
            <div class="market-header">
              <strong>BTC</strong>
              <span class="market-change">+0.0%</span>
            </div>
            <div class="market-price">$‚Äî</div>
            <canvas class="market-chart" width="340" height="60"></canvas>
            <div class="market-actions">
              <button class="btn-trade buy" data-symbol="BTCUSDT" data-type="buy">Buy</button>
              <button class="btn-trade sell" data-symbol="BTCUSDT" data-type="sell">Sell</button>
            </div>
          </div>
          
          <div class="market-card glass" data-symbol="ETHUSDT">
            <div class="market-header">
              <strong>ETH</strong>
              <span class="market-change">+0.0%</span>
            </div>
            <div class="market-price">$‚Äî</div>
            <canvas class="market-chart" width="340" height="60"></canvas>
            <div class="market-actions">
              <button class="btn-trade buy" data-symbol="ETHUSDT" data-type="buy">Buy</button>
              <button class="btn-trade sell" data-symbol="ETHUSDT" data-type="sell">Sell</button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Trades Tab -->
      <section id="tradesTab" class="tab-content">
        <div class="card glass">
          <h3 class="card-title" data-i18n="myTrades">My Trades</h3>
          <div id="tradesList" class="trades-list">
            <div class="empty-state">No trades yet</div>
          </div>
          
          <div class="trade-controls">
            <input type="number" id="slInput" class="input-field" placeholder="Stop-Loss">
            <input type="number" id="tpInput" class="input-field" placeholder="Take-Profit">
            <button id="saveSLTPBtn" class="btn btn-primary" data-i18n="save">Save</button>
          </div>
        </div>
      </section>
      
      <!-- Withdraw Tab -->
      <section id="withdrawTab" class="tab-content">
        <div class="card glass">
          <h3 class="card-title" data-i18n="withdrawCrypto">Withdraw (Crypto only)</h3>
          
          <button id="methodBtn" class="btn btn-secondary">
            Method: <strong id="methodLabel">USDT (TRC20)</strong>
          </button>
          
          <div id="methodInfo" class="method-info"></div>
          
          <div class="withdraw-form">
            <input type="number" id="amountInput" class="input-field" placeholder="Amount">
            <button id="withdrawBtn" class="btn btn-primary" data-i18n="request">Request</button>
          </div>
          
          <small class="note" data-i18n="savedAddr">* Saved address for selected method will be used.</small>
          
          <div class="card glass" style="margin-top: 16px;">
            <h3 class="card-title" data-i18n="deposit">Deposit</h3>
            <div class="info-box warning">
              <p>üí¨ To add funds, please contact support:</p>
            </div>
            
            <div class="support-buttons">
              <a href="https://wa.me/message/P6BBPSDL2CC4D1" target="_blank" class="btn btn-primary">
                üìû WhatsApp Support
              </a>
              <a href="https://t.me/qlsupport" target="_blank" class="btn btn-secondary">
                ‚úâÔ∏è Telegram: @qlsupport
              </a>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Requests Tab -->
      <section id="requestsTab" class="tab-content">
        <div class="card glass">
          <h3 class="card-title" data-i18n="yourRequests">Your requests</h3>
          <div id="requestsList" class="requests-list">
            <div class="empty-state">No requests yet</div>
          </div>
        </div>
      </section>
      
      <!-- Support Tab -->
      <section id="supportTab" class="tab-content">
        <div class="card glass">
          <h3 class="card-title" data-i18n="supportCenter">Support Center</h3>
          <p class="support-text">
            WhatsApp: <a href="https://wa.me/message/P6BBPSDL2CC4D1" target="_blank">Open Chat</a>
          </p>
          <p class="support-text">
            Telegram: <a href="https://t.me/QL_Support" target="_blank">@QL_Support</a>
          </p>
        </div>
      </section>
      
    </main>
  </div>

  <!-- Settings Drawer -->
  <div id="settingsDrawer" class="settings-drawer">
    <div class="drawer-header">
      <h3 class="drawer-title">Settings</h3>
      <button id="closeSettingsBtn" class="icon-btn">‚úñÔ∏è</button>
    </div>
    
    <div class="drawer-content">
      <div class="settings-section">
        <h4 class="settings-subtitle">Broker Connection</h4>
        
        <div class="broker-card">
          <div class="broker-logo">XM</div>
          <div class="broker-info">
            <p class="broker-name">XM Trading</p>
            <p class="broker-status connected">Connected</p>
          </div>
        </div>
        
        <div class="settings-item">
          <span class="settings-label">Account Name</span>
          <span class="settings-value" id="accountName">John Doe</span>
        </div>
        
        <div class="settings-item">
          <span class="settings-label">Email</span>
          <span class="settings-value" id="accountEmail">john@example.com</span>
        </div>
        
        <div class="settings-item">
          <span class="settings-label">Account Type</span>
          <span class="settings-value" id="accountType">Standard</span>
        </div>
        
        <div class="settings-item">
          <span class="settings-label">Connection Status</span>
          <span class="settings-value success" id="connectionStatus">Active</span>
        </div>
        
        <button class="btn btn-secondary" id="disconnectBrokerBtn">Disconnect Broker</button>
        <a href="https://www.xm.com/" target="_blank" class="btn btn-primary">Open XM Dashboard</a>
      </div>
      
      <div class="settings-section">
        <h4 class="settings-subtitle">Telegram Info</h4>
        
        <div class="settings-item">
          <span class="settings-label">Telegram ID</span>
          <span class="settings-value" id="telegramId">Loading...</span>
        </div>
        
        <a href="https://t.me/QL_Support" target="_blank" class="btn btn-secondary">Open in Telegram</a>
      </div>
    </div>
  </div>
  
  <!-- Withdraw Method Sheet -->
  <div id="methodSheet" class="bottom-sheet">
    <div class="sheet-handle"></div>
    <h3 class="sheet-title" data-i18n="chooseMethod">Choose withdraw method</h3>
    
    <button class="sheet-item" data-method="usdt_trc20">USDT (TRC20)</button>
    <button class="sheet-item" data-method="usdt_erc20">USDT (ERC20)</button>
    <button class="sheet-item" data-method="btc">Bitcoin (BTC)</button>
    <button class="sheet-item" data-method="eth">Ethereum (ETH)</button>
    
    <button id="sheetCancelBtn" class="btn btn-secondary" data-i18n="cancel">Cancel</button>
  </div>

  <!-- Audio -->
  <audio id="notifySound" src="./notify.mp3" preload="auto"></audio>

  <!-- App Script -->
  <script src="./app.js"></script>
  
</body>
</html>
